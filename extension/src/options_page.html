<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
        <title>Options</title>
        <link rel="stylesheet" type="text/css" href="options_page.css">
    </head>

<body>

    <!-- TODO link from the page here straight to the features? -->
    <fieldset>
        <legend><strong>Don't forget to save settings after changing</strong></legend>
        <button id="save_id">Save</button>
    </fieldset>

    <fieldset>
        <legend>Troubleshoot</legend>
        <div>
            See <a href="https://github.com/karlicoss/promnesia/blob/master/doc/TROUBLESHOOTING.org">troubleshooting guide/help</a>
        </div>
        <div>
            If you messed up any extension settings, you can check
            <a href="https://github.com/karlicoss/promnesia/blob/master/extension/src/options.js">src/options.js</a>
        </div>
    <!-- TODO give some quick help on using CSS, some examples too? -->
    </fieldset>


    <fieldset>
    <legend>Sources</legend>
    <fieldset>
        <legend>Backend settings</legend>
        <b>Don't forget to setup & run the <a href="https://github.com/karlicoss/promnesia#try-it-out">backend</a> first.</b>
        <br>However, you can leave it empty if you want to use in-browser visits only.
        <div style='display:flex'>
        <input title="Host" type="URL" id="host_id" style='flex-grow: 1'>
        <input title="Basic auth token" type="password" id="token_id" placeholder="Basic auth token (if needed)">
        <button id="backend_status_id">Check status</button>
        </div>
    </fieldset>
    <fieldset>
        <legend>In-browser sources</legend>
Note that these sources aren't typicaly as useful as the backend ones, and support for them is still limited (see <a href="https://github.com/karlicoss/promnesia/issues/120">issues/120</a>)
            <fieldset>
            <legend>Browser bookmarks</legend>
            <table>
                <tr>
                    <td><input  id="use_bookmarks_id" type="checkbox" /></td>
                    <td><label for="use_bookmarks_id">Enable</label></td>
                </tr>
            </table>
            </fieldset>

            <fieldset>
            <legend>Browser history</legend>
            <table>
                <tr>
                    <td><input  id="use_browserhistory_id" type="checkbox" /></td>
                    <td><label for="use_browserhistory_id">Enable</label></td>
                </tr>
            </table>
            <hr>
            <label for="browserhistory_max_results_id">
                History results limit
                (controls <a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/API/history/search#Parameters">this</a> parameter).
                Set it to lower value if you suspect browsery history search is causing slowdowns for you (pretty unlikely though)</label>
            <input  id="browserhistory_max_results_id" title="History results limit" type="number">
    </fieldset>
    </fieldset>

    <fieldset>
        <legend>Behaviour</legend>
        Note: you can also quickly toggle some of these settings via the context menu on any page.
        <table>
            <tr>
                <td><input  id="sidebar_detect_urls_id" type="checkbox"/></td>
                <td><label for="sidebar_detect_urls_id">Detect and linkify URLs in the sidebar</label></td>
            </tr>
            <tr>
                <td><input type="checkbox" id="highlight_id"/></td>
                <td><label for="highlight_id">
                    Highlight <a href="https://github.com/karlicoss/promnesia#glossary">contexts</a> (experimental, may result in slowdown on huge pages)
                </label></td>
            </tr>
            <tr>
                <td><input  id="sidebar_always_show_id" type="checkbox"/></td>
                <td><label for="sidebar_always_show_id">
                    Always show sidebar (experimental)
                </label></td>
            </tr>
            <tr>
                <td><input  id="mark_visited_always_id" type="checkbox"/></td>
                <td><label for="mark_visited_always_id">
                    Always <a href="https://karlicoss.github.io/promnesia-demos/mark-visited.webm">'mark visited'</a> on page load (experimental, may result in slowdowns/glitches)
                </label></td>
            </tr>
            <tr>
                <td><input type="checkbox" id="contexts_popup_id"/></td>
                <td><label for="contexts_popup_id">Popup notification when link has contexts (may be spammy)</label></td>
            </tr>
            <tr>
                <td><input type="checkbox" id="verbose_errors_id"/></td>
                <td><label for="verbose_errors_id">Verbose errors (for debugging, may result in notification spam)</label></td>
            </tr>
        </table>
        <hr>
        <div>
            <label for="blacklist_id">Blacklisted links and domains:</label>
            <div class="description">Blacklisting might be useful for several purposes:
- less distraction: if you don't need to be notified of specific pages (e.g. they are too broad)
- privacy: to avoid passing sensitive information to the extension
- performance: if you experience problems with certain pages
            </div>
            <!-- TODO copy pasted from blacklist() function -->
            <div class="description">Supported formats:
- <code>domain.name</code>, e.g.: <code>web.telegram.org</code>
      Will exclude whole Telegram website.
- <code>http://exact/match</code>, e.g.: <code>http://github.com</code>
      Will only exclude Github main page. Subpages will still work.
- <code>/regul.r.*expression/</code>, e.g.: <code>/github.*/yourusername/</code>
      Quick way to exclude your own Github repostitories.</div>
            <div id="blacklist_id"></div>
        </div>
        <hr>
        <div>
            <label for="filterlists_id">Filter lists:<label>
            <div class="description">In addition to specific blacklisting above, you can specify links to filter lists.
They will be autoupdated every 3 days. Spec format (Json):<pre>[
    ["name (arbitrary)", "link"],
    ["name2"           , "link 2", "optional comment"]
]</pre></div>
            <div id="filterlists_id"></div>
        </div>
        <hr>
        <div>
            <label for="source_map_id">Source map (json):</label>
            <div class="description">Can be used to rename the sources</div>
            <div id="source_map_id"></div>
        </div>
    </fieldset>

    <!-- TODO hmm. iframe css can't be applied from outside; so we have to use two separate CSS settings.. -->
    <!-- could be a bit confusing for user -->
    <fieldset>
        <legend>Style settings (CSS)</legend>
        <div class="description">Not very documented at the moment; you can use your browser devtools to experiment</div>
        <div id="position_css_id"></div>
    </fieldset>
    <details>
        <summary>Deprecated/misc settings</summary>
        <fieldset>
            <legend>Sidebar style (DEPRECATED!)</legend>
            <div>If you had any settings here, please move them to the field above</div>
            <div id="extra_css_id"></div>
        </fieldset>
    </details>
    <script src="options_page.js"/></script>
</body>
</html>
